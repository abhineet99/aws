{% extends "base.html" %}
{% load static %}


{% block header %}
    <title>AWS | Forms | Create </title>
    <script src="{% static 'forms/create.js' %}"></script> 
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
    <script src="https://unpkg.com/json5@^2.0.0/dist/index.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>
    <script>
        let fb_id = parseInt("{{ fb_object.pk }}");
    </script>
{%endblock%}

{% block content %}
    
    {% comment %} row containing the jumbotron heading {% endcomment %}
    
    <div class='row'>
        <div class='col-md-1'></div>
        <div class='col-md-10'>
            <div class='jumbotron'>
                <h5><strong>Welcome to the Automated Workflow System - Forms Create Page</strong></h5>
            </div>
        </div>
        <div class='col-md-1'></div>
    </div>
    {% comment %} row containing the jumbotron heaidng ends here {% endcomment %}
    <div class="container-fluid"> 
    
        <div id="node_list">
            <div class="row">
            {% for node in workflow_nodes %}

                <div class="col-2">
                    <div class="card" style="width: 18rem;">
                        <div class="card-body">
                            <h5 class="card-title">Node {{ forloop.counter }}</h5>
                            <p class="card-text"></p>
                                Role: {{node.assosiated_role}}
                                | Team: {{node.assosiated_team}}
                            
                        </div>
                    </div>
                </div>
            
        {% endfor %}
        </div>
    </div>
    <hr>
    </div>

    {% comment %} row containg the form editing options begins here  {% endcomment %}
    <div class='row'>
        <div class='col-md-1'></div>
        <div class='col-md-2'>
            {% comment %} Node selection dropdown {% endcomment %}
            <p>Select node for the section to be added</p>
            <select type="text" name="section_node" style="width: 10rem;"  id="section_node" >
                {% for node in workflow_nodes %}
                <option value="{'role': '{{node.assosiated_role}}' , 'team': '{{node.assosiated_team}}' }">{{ forloop.counter }}</option>
                {% endfor %}
            </select>  
            {% comment %} add section button {% endcomment %}
            <br></br>
            <button type='button' class='btn btn-primary btn-block' id='add_section'>Add Section</button>
            
            <button type='button' class='btn btn-success btn-block' id='log_btn'>Save Form Blueprint</button>
        </div>
        <div class='col-md-1'></div>
        <div class='col-md-3'>
            {% comment %} create a form for adding a field which then invokes the js function {% endcomment %}
            <form name='add_field_form' id='add_field_form' >
                {% comment %} dropdown for selecting the type of field {% endcomment %}
                <div class='row'>
                    <div class="col form-group row">
                        <label for="type_of_field">Type: </label>
                        <div class="col-md-9">
                        <select class= 'form-control form-control-sm' id="type_of_field">
                            <option value="strng">String</option>
                            <option value="intgr">Integer</option>
                            <option value="mcqs">Multiple Choice Single Select</option>
                            <option value="mcqm">Multiple Choice Multiple Select</option>
                            <option value="fl">File Upload</option>
                        </select>
                        </div>
                    </div>

                    {% comment %} title of the field {% endcomment %}
                    <div class="col form-group row">
                        <label for="title_of_field">Title: </label>
                        <div class='col-md-9'>
                        <input class='form-control form-control-sm' type="text" id="title_of_field" name="title_of_field">
                        </div>
                    </div>
                </div>

                {% comment %} required field or not {% endcomment %}
                <div class='row'>
                    <div class="col form-check">
                        <label class="form-check-label">
                            <input  class="form-check-input" id='required_field' name='required_field' type="checkbox">Required
                        </label>
                    </div>
                    <div class='col'>
                        <input id ='submit_add_field'  class='btn btn-primary btn-block' type='submit' value='Add Field'>
                    </div>
                </div>

            </form>
            {% comment %} <br><br><br> {% endcomment %}
        </div>
        <div class='col-md-1'></div>
        <div class='col-md-3'>
            {% comment %} Here add the div for mcqs, mcqm and fl type fields{% endcomment %}
            <div id='optional_div'>
                <form id='add_option_form'>
                    <div class='form-group row'>
                        <label for='option_text'>Add Option: </label>
                        <div class='col'>
                        <input class='form-control form-control-sm' type='text' id='option_text'>
                        </div>
                    </div>
                    <input class='btn btn-primary btn-block' type='submit'  value='Add Option' id='add_option_button'>
                </form>
            </div>
            {% comment %} the optional div ends here {% endcomment %}
        </div>

        <div class='col-md-1'></div>
    </div>
    {% comment %} row containing the form edit options ends here {% endcomment %}
    <div class='row'><br><br></div>
    {% comment %} row containing the dynamic-form  {% endcomment %}
    <div class='row'>
        <div class='col-md-1'></div>
        <div class='col-md-10'>
            <form name='dynamic-form' id='dynamic-form'></form>
        </div>
        <div class='col-md-1'></div>
    </div>
    {% comment %} dynamic form row ends here  {% endcomment %}

{%endblock%}